<!-- u src/app/components/issue-certificate-form/issue-certificate-form.component.html -->

<div class="form-container">
  <h2>Izdavanje Novog Sertifikata</h2>
   <ng-container *ngIf="certificateForm">
  <form [formGroup]="certificateForm" (ngSubmit)="onSubmit()">
    
    <!-- Podaci o vlasniku -->
    <h4>Podaci o vlasniku (Subject)</h4>
    <input formControlName="commonName" placeholder="Common Name (npr. Ime i Prezime)">
    <input formControlName="surname" placeholder="Prezime">
    <input formControlName="givenName" placeholder="Ime">
    <input formControlName="organization" placeholder="Organizacija (npr. UNS-FTN)">
    <input formControlName="organizationalUnit" placeholder="Organizaciona jedinica (npr. Katedra)">
    <input formControlName="country" placeholder="Država (kod, npr. RS)">
    <input formControlName="email" placeholder="Email adresa vlasnika">

    <hr>
    
    <!-- Tehnički podaci -->
    <h4>Tehnički podaci</h4>
    <label for="ownerEmail">Email korisnika vlasnika (iz 'users' tabele):</label>
    <input id="ownerEmail" formControlName="ownerEmail" placeholder="Email vlasnika naloga">
    
    <label for="type">Tip sertifikata:</label>
    <select id="type" formControlName="type">
      <option value="ROOT">ROOT</option>
      <option value="INTERMEDIATE">INTERMEDIATE</option>
      <option value="END_ENTITY">END_ENTITY</option>
    </select>
    
    <!-- Prikazujemo ovo polje samo ako tip NIJE ROOT -->
    <div *ngIf="certificateForm.get('type')?.value !== 'ROOT'">
      <label for="issuer">Serijski broj izdavaoca (Issuer):</label>
      <input id="issuer" formControlName="issuerSerialNumber" placeholder="Unesite serijski broj CA sertifikata">
    </div>

    <label for="validFrom">Važi od:</label>
    <input id="validFrom" type="date" formControlName="validFrom">
    
    <label for="validTo">Važi do:</label>
    <input id="validTo" type="date" formControlName="validTo">

    <button type="submit" [disabled]="certificateForm.invalid">Izdaj Sertifikat</button>
  </form>
  </ng-container>
</div>